{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///angularCropImage.min.js","webpack:///webpack/bootstrap daea2a9430bb15279dae","webpack:///./src/module.js","webpack:///./src/services/CropImage.js","webpack:///./src/directives/cropImageModel.js","webpack:///./src/directives/cropImage.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequire","obj","__esModule","CropImage","cropImageModel","cropImage","angular","directive","_createClass","defineProperties","target","props","key","prop","configurable","value","writable","Object","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","$document","element","data","$element","extend","DEFAULT","checkZoom","ratio","_private","methods","getRatio","size","getSize","position","getCenterPosition","__last","getStyle","setCss","listen","startChangePosition","event","_self","__disabled","__startChangePosition","on","updatePosition","stopChangePosition","__updatePosition","off","__stopChangePosition","setZoom","val","zoom","recalcSize","zoomIn","rate","zoomOut","maxZoom","minZoom","image","src","style","backgroundImage","replace","width","clientWidth","height","clientHeight","cancel","x","y","__checkPosition","css","backgroundSize","backgroundPosition","crop","canvas","getCanvas","scale","ctx","clearRect","restore","save","setTransform","pixelRatio","drawImage","Image","toDataURL","onload","__canvas","document","createElement","getContext","border","fx","fy","__changePosition","body","addClass","_event","type","touches","_lastEvent","clientX","clientY","removeClass","disabled","set","parseInt","_instance$data","backgroundRepeat","$inject","restrict","scope","link","file","files","reader","FileReader","test","result","$apply","readAsDataURL","attributes","directiveName","source","$watch","cropImageModeEdit","cropImageZoom","cropImageZoomIn","cropImageZoomOut","cropImageCut","cropImageCancel"],"mappings":"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","file":"angularCropImage.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularCropImage\"] = factory();\n\telse\n\t\troot[\"angularCropImage\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"angularCropImage\"] = factory();\n\telse\n\t\troot[\"angularCropImage\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n\tvar CropImage = _interopRequire(__webpack_require__(1));\n\n\tvar cropImageModel = _interopRequire(__webpack_require__(2));\n\n\tvar cropImage = _interopRequire(__webpack_require__(3));\n\n\tangular.module(\"angularCropImage\", []).factory(\"CropImage\", CropImage).directive(\"cropImageModel\", cropImageModel).directive(\"cropImage\", cropImage);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n\tmodule.exports = function ($document) {\n\t\tvar CropImage = (function () {\n\t\t\tfunction CropImage(element, data) {\n\t\t\t\t_classCallCheck(this, CropImage);\n\n\t\t\t\tthis.$element = element;\n\t\t\t\tthis.data = angular.extend({}, CropImage.DEFAULT, data);\n\n\t\t\t\tthis.checkZoom();\n\n\t\t\t\tthis.data.ratio = _private.methods.getRatio(this);\n\t\t\t\tthis.data.size = _private.methods.getSize(this);\n\t\t\t\tthis.data.position = _private.methods.getCenterPosition(this);\n\n\t\t\t\tthis.__last = this.getStyle();\n\n\t\t\t\t_private.methods.setCss(this);\n\n\t\t\t\tthis.listen();\n\t\t\t}\n\n\t\t\t_createClass(CropImage, {\n\t\t\t\tlisten: {\n\t\t\t\t\tvalue: function listen() {\n\n\t\t\t\t\t\tvar _self = this;\n\n\t\t\t\t\t\tthis.$element.on(\"mousedown\", startChangePosition).on(\"touchstart\", startChangePosition);\n\n\t\t\t\t\t\tfunction startChangePosition(event) {\n\n\t\t\t\t\t\t\tif (_self.__disabled) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}_self.__startChangePosition(event);\n\n\t\t\t\t\t\t\t$document.on(\"mousemove\", updatePosition).on(\"mouseup\", stopChangePosition).on(\"touchmove\", updatePosition).on(\"touchend\", stopChangePosition);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction updatePosition(event) {\n\n\t\t\t\t\t\t\t_self.__updatePosition(event);\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction stopChangePosition(event) {\n\n\t\t\t\t\t\t\t$document.off(\"mousemove\", updatePosition).off(\"mouseup\", stopChangePosition).off(\"touchmove\", updatePosition).off(\"touchend\", stopChangePosition);\n\n\t\t\t\t\t\t\t_self.__stopChangePosition(event);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsetZoom: {\n\t\t\t\t\tvalue: function setZoom(val) {\n\n\t\t\t\t\t\tthis.data.zoom = val < 1 ? 1 : val;\n\n\t\t\t\t\t\tthis.recalcSize();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tzoomIn: {\n\t\t\t\t\tvalue: function zoomIn(rate) {\n\n\t\t\t\t\t\tif (this.__disabled) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}this.data.zoom += rate;\n\n\t\t\t\t\t\tthis.checkZoom();\n\n\t\t\t\t\t\tthis.recalcSize();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tzoomOut: {\n\t\t\t\t\tvalue: function zoomOut(rate) {\n\n\t\t\t\t\t\tif (this.__disabled) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}this.data.zoom -= rate;\n\n\t\t\t\t\t\tthis.checkZoom();\n\n\t\t\t\t\t\tthis.recalcSize();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcheckZoom: {\n\t\t\t\t\tvalue: function checkZoom() {\n\n\t\t\t\t\t\tif (this.data.zoom > this.data.maxZoom) this.data.zoom = +this.data.maxZoom;else if (this.data.zoom < this.data.minZoom) this.data.zoom = +this.data.minZoom;else this.data.zoom = +this.data.zoom;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetStyle: {\n\t\t\t\t\tvalue: function getStyle() {\n\n\t\t\t\t\t\tvar instance = {\n\t\t\t\t\t\t\t$element: this.$element,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\tsrc: (this.$element[0].style.backgroundImage || \"none\").replace(/^url\\(/, \"\").replace(/\\)$/, \"\")\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsize: {\n\t\t\t\t\t\t\t\t\twidth: this.$element[0].clientWidth,\n\t\t\t\t\t\t\t\t\theight: this.$element[0].clientHeight\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tinstance.data = angular.extend({}, CropImage.DEFAULT, instance.data);\n\n\t\t\t\t\t\treturn instance;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\tvalue: function cancel() {\n\n\t\t\t\t\t\tif (this.__disabled) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}_private.methods.setCss(this.__last);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trecalcSize: {\n\t\t\t\t\tvalue: function recalcSize() {\n\n\t\t\t\t\t\tvar size = _private.methods.getSize(this);\n\n\t\t\t\t\t\tthis.data.position.x += (size.width - this.data.size.width) / 2;\n\t\t\t\t\t\tthis.data.position.y += (size.height - this.data.size.height) / 2;\n\n\t\t\t\t\t\tthis.data.size = size;\n\n\t\t\t\t\t\tthis.__checkPosition();\n\n\t\t\t\t\t\tthis.$element.css({\n\t\t\t\t\t\t\tbackgroundSize: size.width + \"px \" + size.height + \"px\",\n\t\t\t\t\t\t\tbackgroundPosition: -1 * this.data.position.x + \"px \" + -1 * this.data.position.y + \"px\"\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcrop: {\n\t\t\t\t\tvalue: function crop() {\n\n\t\t\t\t\t\tvar instance = this;\n\t\t\t\t\t\tvar canvas = this.getCanvas();\n\t\t\t\t\t\tvar scale = this.data.ratio.width < this.data.ratio.height ? this.data.ratio.height * this.data.zoom : this.data.ratio.width * this.data.zoom;\n\n\t\t\t\t\t\tcanvas.ctx.clearRect(0, 0, canvas.element.width, canvas.element.height);\n\t\t\t\t\t\tcanvas.ctx.restore();\n\t\t\t\t\t\tcanvas.ctx.save();\n\n\t\t\t\t\t\tcanvas.ctx.setTransform(scale * this.data.pixelRatio, 0, 0, scale * this.data.pixelRatio, -1 * this.data.position.x * this.data.pixelRatio, -1 * this.data.position.y * this.data.pixelRatio);\n\t\t\t\t\t\tcanvas.ctx.drawImage(this.data.image, 0, 0);\n\n\t\t\t\t\t\tthis.data.image = new Image();\n\t\t\t\t\t\tthis.data.image.src = canvas.element.toDataURL(\"image/jpg\");\n\t\t\t\t\t\tthis.data.image.onload = function () {\n\n\t\t\t\t\t\t\tinstance.data.image.width = instance.data.image.width / instance.data.pixelRatio;\n\t\t\t\t\t\t\tinstance.data.image.height = instance.data.image.height / instance.data.pixelRatio;\n\n\t\t\t\t\t\t\tinstance.data.zoom = 1;\n\t\t\t\t\t\t\tinstance.data.ratio = _private.methods.getRatio(instance);\n\t\t\t\t\t\t\tinstance.data.size = _private.methods.getSize(instance);\n\t\t\t\t\t\t\tinstance.data.position = _private.methods.getCenterPosition(instance);\n\n\t\t\t\t\t\t\t_private.methods.setCss(instance);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn this.data.image.src;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetCanvas: {\n\t\t\t\t\tvalue: function getCanvas() {\n\n\t\t\t\t\t\tif (this.__canvas) {\n\t\t\t\t\t\t\treturn this.__canvas;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar canvas = this.__canvas = {};\n\t\t\t\t\t\tcanvas.element = document.createElement(\"canvas\");\n\t\t\t\t\t\tcanvas.ctx = canvas.element.getContext(\"2d\");\n\t\t\t\t\t\tcanvas.element.width = this.$element[0].clientWidth * this.data.pixelRatio;\n\t\t\t\t\t\tcanvas.element.height = this.$element[0].clientHeight * this.data.pixelRatio;\n\n\t\t\t\t\t\treturn canvas;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t__checkPosition: {\n\t\t\t\t\tvalue: function __checkPosition() {\n\n\t\t\t\t\t\tif (this.data.border === \"false\" || !this.data.border) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar fx = this.data.size.width - this.$element[0].clientWidth;\n\t\t\t\t\t\tvar fy = this.data.size.height - this.$element[0].clientHeight;\n\n\t\t\t\t\t\tif (fx < this.data.position.x) this.data.position.x = fx;else if (this.data.position.x < 0) this.data.position.x = 0;\n\n\t\t\t\t\t\tif (fy < this.data.position.y) this.data.position.y = fy;else if (this.data.position.y < 0) this.data.position.y = 0;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t__startChangePosition: {\n\t\t\t\t\tvalue: function __startChangePosition(event) {\n\n\t\t\t\t\t\tthis.__changePosition = event;\n\n\t\t\t\t\t\tbody.addClass(\"cursor-move\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t__updatePosition: {\n\t\t\t\t\tvalue: function __updatePosition(event) {\n\n\t\t\t\t\t\tvar _event = event.type == \"touchmove\" ? event.touches[0] : event;\n\t\t\t\t\t\tvar _lastEvent = event.type == \"touchmove\" ? this.__changePosition.touches[0] : this.__changePosition;\n\n\t\t\t\t\t\tthis.data.position.x += _lastEvent.clientX - _event.clientX;\n\t\t\t\t\t\tthis.data.position.y += _lastEvent.clientY - _event.clientY;\n\n\t\t\t\t\t\tthis.__changePosition = event;\n\n\t\t\t\t\t\tthis.__checkPosition();\n\n\t\t\t\t\t\tthis.$element.css({ backgroundPosition: -1 * this.data.position.x + \"px \" + -1 * this.data.position.y + \"px\" });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t__stopChangePosition: {\n\t\t\t\t\tvalue: function __stopChangePosition() {\n\n\t\t\t\t\t\tthis.__changePosition = null;\n\n\t\t\t\t\t\tbody.removeClass(\"cursor-move\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdisabled: {\n\t\t\t\t\tset: function (disabled) {\n\t\t\t\t\t\tthis.__disabled = disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn CropImage;\n\t\t})();\n\n\t\tCropImage.DEFAULT = {\n\n\t\t\timage: {\n\t\t\t\tsrc: null,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t},\n\t\t\tposition: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t},\n\t\t\tpixelRatio: 1,\n\t\t\tzoom: 1,\n\t\t\tmaxZoom: 5,\n\t\t\tminZoom: 1,\n\t\t\tborder: true\n\n\t\t};\n\n\t\tvar body = angular.element(document.body);\n\n\t\tvar _private = {\n\n\t\t\tmethods: {\n\n\t\t\t\tgetCenterPosition: function (instance) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tx: parseInt((instance.data.size.width - instance.$element[0].clientWidth) / 2),\n\t\t\t\t\t\ty: parseInt((instance.data.size.height - instance.$element[0].clientHeight) / 2)\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tgetSize: function (instance) {\n\t\t\t\t\tvar _instance$data = instance.data;\n\t\t\t\t\tvar ratio = _instance$data.ratio;\n\t\t\t\t\tvar image = _instance$data.image;\n\t\t\t\t\tvar zoom = _instance$data.zoom;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: parseInt(ratio.width < ratio.height ? image.width * ratio.height * zoom : image.width * ratio.width * zoom),\n\t\t\t\t\t\theight: parseInt(ratio.width < ratio.height ? image.height * ratio.height * zoom : image.height * ratio.width * zoom)\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tgetRatio: function (instance) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: instance.$element[0].clientWidth / instance.data.image.width,\n\t\t\t\t\t\theight: instance.$element[0].clientHeight / instance.data.image.height\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tsetCss: function (instance) {\n\n\t\t\t\t\tinstance.$element.css({\n\t\t\t\t\t\tbackgroundImage: \"url(\" + instance.data.image.src + \")\",\n\t\t\t\t\t\tbackgroundPosition: -1 * instance.data.position.x + \"px \" + -1 * instance.data.position.y + \"px\",\n\t\t\t\t\t\tbackgroundSize: instance.data.size.width + \"px \" + instance.data.size.height + \"px\",\n\t\t\t\t\t\tbackgroundRepeat: \"no-repeat\"\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\treturn CropImage;\n\t};\n\n\tmodule.exports.$inject = [\"$document\"];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function (CropImage) {\n\n\t\treturn {\n\n\t\t\trestrict: \"A\",\n\t\t\tscope: {\n\t\t\t\tcropImageModel: \"=\"\n\t\t\t},\n\t\t\tlink: function (scope, element) {\n\n\t\t\t\telement.on(\"change\", function () {\n\n\t\t\t\t\tvar file = this.files[0],\n\t\t\t\t\t    reader = new FileReader();\n\n\t\t\t\t\tif (!file || !/image/.test(file.type)) {\n\t\t\t\t\t\t// error this file not Image;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treader.onload = function () {\n\n\t\t\t\t\t\tscope.cropImageModel = reader.result;\n\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t};\n\n\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tmodule.exports = function (CropImage) {\n\n\t\treturn {\n\n\t\t\trestrict: \"A\",\n\n\t\t\tlink: function (scope, element, attributes) {\n\n\t\t\t\tvar instance;\n\t\t\t\tvar directiveName = \"cropImage\";\n\t\t\t\tvar source = attributes[directiveName];\n\n\t\t\t\tvar data = angular.extend({}, attributes);\n\n\t\t\t\tscope.$watch(source, function (src) {\n\n\t\t\t\t\tif (!src) return;\n\n\t\t\t\t\tdata.image = new Image();\n\t\t\t\t\tdata.image.src = src;\n\n\t\t\t\t\tscope.cropImageModeEdit = true;\n\n\t\t\t\t\tdata.image.onload = function () {\n\t\t\t\t\t\treturn element.data(directiveName, instance = new CropImage(element, data));\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tscope.cropImageZoom = function (value) {\n\n\t\t\t\t\tif (!instance) return;\n\n\t\t\t\t\tinstance.setZoom(value);\n\t\t\t\t};\n\n\t\t\t\tscope.cropImageZoomIn = function (rate) {\n\n\t\t\t\t\tif (!instance) return;\n\n\t\t\t\t\tinstance.zoomIn(rate);\n\t\t\t\t};\n\n\t\t\t\tscope.cropImageZoomOut = function (rate) {\n\n\t\t\t\t\tif (!instance) return;\n\n\t\t\t\t\tinstance.zoomOut(rate);\n\t\t\t\t};\n\n\t\t\t\tscope.cropImageCut = function () {\n\n\t\t\t\t\tif (!instance) return;\n\n\t\t\t\t\tscope.cropImageModeEdit = false;\n\n\t\t\t\t\tinstance.disabled = true;\n\n\t\t\t\t\treturn instance.crop();\n\t\t\t\t};\n\n\t\t\t\tscope.cropImageCancel = function () {\n\n\t\t\t\t\tif (!instance) return;\n\n\t\t\t\t\tscope.cropImageModeEdit = false;\n\n\t\t\t\t\tinstance.cancel();\n\n\t\t\t\t\tinstance.disabled = true;\n\t\t\t\t};\n\t\t\t}\n\n\t\t};\n\t};\n\n\tmodule.exports.$inject = [\"CropImage\"];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** angularCropImage.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap daea2a9430bb15279dae\n **/","'use strict';\n\nimport CropImage from './services/CropImage';\n\nimport cropImageModel from './directives/cropImageModel';\nimport cropImage from './directives/cropImage';\n\n\nangular\n\t.module('angularCropImage', [])\n\t.factory('CropImage', CropImage)\n\t.directive('cropImageModel', cropImageModel)\n\t.directive('cropImage', cropImage);\n\n\n/** WEBPACK FOOTER **\n ** ./src/module.js\n **/","'use strict';\n\n\nexport default ($document) => {\n\n\n\n\tclass CropImage {\n\n\n\t\tconstructor (element, data) {\n\n\t\t\tthis.$element = element;\n\t\t\tthis.data = angular.extend({}, CropImage.DEFAULT, data);\n\n\t\t\tthis.checkZoom();\n\n\t\t\tthis.data.ratio    = _private.methods.getRatio(this);\n\t\t\tthis.data.size     = _private.methods.getSize(this);\n\t\t\tthis.data.position = _private.methods.getCenterPosition(this);\n\n\t\t\tthis.__last = this.getStyle();\n\n\t\t\t_private.methods.setCss( this );\n\n\t\t\tthis.listen();\n\t\t}\n\n\n\t\tlisten () {\n\n\t\t\tvar _self = this;\n\n\t\t\tthis.$element\n\t\t\t\t.on('mousedown', startChangePosition)\n\t\t\t\t.on('touchstart', startChangePosition);\n\n\n\n\t\t\tfunction startChangePosition (event) {\n\n\t\t\t\tif( _self.__disabled ) return;\n\n\t\t\t\t_self.__startChangePosition(event);\n\n\t\t\t\t$document\n\t\t\t\t\t.on('mousemove', updatePosition)\n\t\t\t\t\t.on('mouseup', stopChangePosition)\n\t\t\t\t\t.on('touchmove', updatePosition)\n\t\t\t\t\t.on('touchend', stopChangePosition);\n\t\t\t}\n\n\t\t\tfunction updatePosition (event) {\n\n\t\t\t\t_self.__updatePosition(event);\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tfunction stopChangePosition (event) {\n\n\t\t\t\t$document\n\t\t\t\t\t.off('mousemove', updatePosition)\n\t\t\t\t\t.off('mouseup', stopChangePosition)\n\t\t\t\t\t.off('touchmove', updatePosition)\n\t\t\t\t\t.off('touchend', stopChangePosition);\n\n\t\t\t\t_self.__stopChangePosition(event);\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\tsetZoom (val) {\n\n\t\t\tthis.data.zoom = val < 1? 1: val;\n\n\t\t\tthis.recalcSize();\n\t\t}\n\n\n\t\tzoomIn (rate) {\n\n\t\t\tif( this.__disabled ) return;\n\n\t\t\tthis.data.zoom += rate;\n\n\t\t\tthis.checkZoom();\n\n\t\t\tthis.recalcSize();\n\n\t\t}\n\n\t\tzoomOut (rate) {\n\n\t\t\tif( this.__disabled ) return;\n\n\t\t\tthis.data.zoom -= rate;\n\n\t\t\tthis.checkZoom();\n\n\t\t\tthis.recalcSize();\n\n\t\t}\n\n\t\tcheckZoom () {\n\n\t\t\tif(this.data.zoom > this.data.maxZoom) this.data.zoom = +this.data.maxZoom;\n\t\t\telse if( this.data.zoom < this.data.minZoom ) this.data.zoom = +this.data.minZoom;\n\t\t\telse this.data.zoom = +this.data.zoom;\n\n\t\t}\n\n\t\tgetStyle () {\n\n\t\t\tvar instance = {\n\t\t\t\t$element: this.$element,\n\t\t\t\tdata : {\n\t\t\t\t\timage : {\n\t\t\t\t\t\tsrc: (this.$element[0].style.backgroundImage || 'none').replace(/^url\\(/,'').replace(/\\)$/,'')\n\t\t\t\t\t},\n\t\t\t\t\tsize : {\n\t\t\t\t\t\twidth : this.$element[0].clientWidth,\n\t\t\t\t\t\theight : this.$element[0].clientHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinstance.data = angular.extend({}, CropImage.DEFAULT, instance.data);\n\n\t\t\treturn instance;\n\n\t\t}\n\n\n\t\tcancel () {\n\n\t\t\tif( this.__disabled ) return;\n\n\t\t\t_private.methods.setCss(this.__last);\n\n\t\t}\n\n\n\t\trecalcSize () {\n\n\t\t\tvar size     = _private.methods.getSize(this);\n\n\t\t\tthis.data.position.x += (size.width - this.data.size.width)/2;\n\t\t\tthis.data.position.y += (size.height - this.data.size.height)/2;\n\n\t\t\tthis.data.size = size;\n\n\t\t\tthis.__checkPosition ();\n\n\t\t\tthis.$element.css({\n\t\t\t\tbackgroundSize: size.width + 'px ' + size.height + 'px',\n\t\t\t\tbackgroundPosition: (-1*this.data.position.x) + 'px ' + (-1*this.data.position.y) + 'px'\n\t\t\t});\n\n\t\t\treturn this;\n\n\t\t}\n\n\n\t\tcrop () {\n\n\t\t\tvar instance = this;\n\t\t\tvar canvas = this.getCanvas();\n\t\t\tvar scale = this.data.ratio.width < this.data.ratio.height? this.data.ratio.height * this.data.zoom: this.data.ratio.width * this.data.zoom;\n\n\t\t\tcanvas.ctx.clearRect(0, 0, canvas.element.width, canvas.element.height);\n\t\t\tcanvas.ctx.restore();\n\t\t\tcanvas.ctx.save();\n\n\t\t\tcanvas.ctx.setTransform(scale*this.data.pixelRatio, 0, 0, scale*this.data.pixelRatio, -1*this.data.position.x*this.data.pixelRatio, -1*this.data.position.y*this.data.pixelRatio);\n\t\t\tcanvas.ctx.drawImage(this.data.image, 0, 0);\n\n\n\t\t\tthis.data.image = new Image ();\n\t\t\tthis.data.image.src = canvas.element.toDataURL('image/jpg');\n\t\t\tthis.data.image.onload = () => {\n\n\t\t\t\tinstance.data.image.width = instance.data.image.width / instance.data.pixelRatio;\n\t\t\t\tinstance.data.image.height = instance.data.image.height / instance.data.pixelRatio;\n\n\t\t\t\tinstance.data.zoom     = 1;\n\t\t\t\tinstance.data.ratio    = _private.methods.getRatio(instance);\n\t\t\t\tinstance.data.size     = _private.methods.getSize(instance);\n\t\t\t\tinstance.data.position = _private.methods.getCenterPosition(instance);\n\n\t\t\t\t_private.methods.setCss(instance);\n\n\t\t\t};\n\n\t\t\treturn this.data.image.src;\n\n\t\t}\n\n\n\t\tgetCanvas () {\n\n\t\t\tif( this.__canvas ){\n\t\t\t\treturn this.__canvas;\n\t\t\t}\n\n\t\t\tvar canvas = this.__canvas = {};\n\t\t\tcanvas.element = document.createElement('canvas');\n\t\t\tcanvas.ctx = canvas.element.getContext('2d');\n\t\t\tcanvas.element.width = this.$element[0].clientWidth * this.data.pixelRatio;\n\t\t\tcanvas.element.height = this.$element[0].clientHeight * this.data.pixelRatio;\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\n\n\t\t__checkPosition () {\n\n\t\t\tif( this.data.border === 'false' || !this.data.border) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar fx = this.data.size.width - this.$element[0].clientWidth;\n\t\t\tvar fy = this.data.size.height - this.$element[0].clientHeight;\n\n\t\t\tif( fx < this.data.position.x ) this.data.position.x = fx;\n\t\t\telse if( this.data.position.x < 0 ) this.data.position.x = 0;\n\n\t\t\tif( fy < this.data.position.y ) this.data.position.y = fy;\n\t\t\telse if( this.data.position.y < 0 ) this.data.position.y = 0;\n\n\t\t}\n\n\n\n\n\t\t__startChangePosition (event) {\n\n\t\t\tthis.__changePosition = event;\n\n\t\t\tbody.addClass('cursor-move');\n\n\t\t}\n\n\t\t__updatePosition (event) {\n\n\t\t\tlet _event = event.type == 'touchmove'? event.touches[0]: event;\n\t\t\tlet _lastEvent = event.type == 'touchmove'? this.__changePosition.touches[0]: this.__changePosition;\n\n\n\t\t\tthis.data.position.x += _lastEvent.clientX - _event.clientX;\n\t\t\tthis.data.position.y += _lastEvent.clientY - _event.clientY;\n\n\t\t\tthis.__changePosition = event;\n\n\n\t\t\tthis.__checkPosition();\n\n\t\t\tthis.$element.css({'backgroundPosition': (-1*this.data.position.x) + 'px ' + (-1*this.data.position.y) + 'px'})\n\n\t\t}\n\n\t\t__stopChangePosition () {\n\n\t\t\tthis.__changePosition = null;\n\n\t\t\tbody.removeClass('cursor-move');\n\n\t\t}\n\n\t\tset disabled (disabled) {\n\t\t\tthis.__disabled = disabled;\n\t\t}\n\n\t}\n\n\n\tCropImage.DEFAULT = {\n\n\t\timage : {\n\t\t\tsrc : null,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t},\n\t\tposition : {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t},\n\t\tsize : {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t},\n\t\tpixelRatio : 1,\n\t\tzoom : 1,\n\t\tmaxZoom : 5,\n\t\tminZoom : 1,\n\t\tborder : true\n\n\t};\n\n\n\tvar body = angular.element(document.body);\n\n\n\tvar _private = {\n\n\n\n\t\tmethods : {\n\n\t\t\tgetCenterPosition : instance => {\n\n\t\t\t\treturn {\n\t\t\t\t\tx : parseInt((instance.data.size.width - instance.$element[0].clientWidth) / 2),\n\t\t\t\t\ty: parseInt((instance.data.size.height -  instance.$element[0].clientHeight) / 2)\n\t\t\t\t};\n\n\t\t\t},\n\n\t\t\tgetSize : instance => {\n\n\t\t\t\tlet {ratio,image,zoom} = instance.data;\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: parseInt( ratio.width < ratio.height ? image.width * ratio.height * zoom: image.width * ratio.width * zoom),\n\t\t\t\t\theight: parseInt( ratio.width < ratio.height ? image.height * ratio.height * zoom : image.height * ratio.width * zoom)\n\t\t\t\t};\n\n\t\t\t},\n\n\t\t\tgetRatio : instance => {\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: instance.$element[0].clientWidth / instance.data.image.width,\n\t\t\t\t\theight: instance.$element[0].clientHeight / instance.data.image.height\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetCss : instance => {\n\n\t\t\t\tinstance.$element.css({\n\t\t\t\t\tbackgroundImage: 'url('+instance.data.image.src+')',\n\t\t\t\t\tbackgroundPosition: (-1*instance.data.position.x) + 'px ' + (-1*instance.data.position.y) + 'px',\n\t\t\t\t\tbackgroundSize: instance.data.size.width + 'px ' + instance.data.size.height + 'px',\n\t\t\t\t\tbackgroundRepeat: 'no-repeat'\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t}\n\n\t};\n\n\n\treturn CropImage;\n\n}\n\n\n\nmodule.exports.$inject = [\n\t'$document'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/services/CropImage.js\n **/","'use strict';\n\n\nexport default  (CropImage) => {\n\n\treturn {\n\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\tcropImageModel : '='\n\t\t},\n\t\tlink: (scope, element) => {\n\n\t\t\telement.on('change', function(){\n\n\t\t\t\tvar file = this.files[0],\n\t\t\t\t    reader = new FileReader();\n\n\n\t\t\t\tif( !file || !/image/.test(file.type) ){\n\t\t\t\t\t// error this file not Image;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treader.onload = () => {\n\n\t\t\t\t\tscope.cropImageModel = reader.result;\n\t\t\t\t\tscope.$apply();\n\n\t\t\t\t};\n\n\t\t\t\treader.readAsDataURL(file);\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n}\n\n\nmodule.exports.$inject = [\n\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/cropImageModel.js\n **/","'use strict';\n\n\nexport default CropImage => {\n\n\n\treturn {\n\n\t\trestrict: 'A',\n\n\t\tlink: (scope, element, attributes) => {\n\n\t\t\tvar instance;\n\t\t\tvar directiveName = 'cropImage';\n\t\t\tvar source = attributes[directiveName];\n\n\t\t\tvar data = angular.extend({}, attributes);\n\n\t\t\tscope.$watch(source, src => {\n\n\t\t\t\tif( !src ) return;\n\n\t\t\t\tdata.image = new Image();\n\t\t\t\tdata.image.src = src;\n\n\t\t\t\tscope.cropImageModeEdit = true;\n\n\t\t\t\tdata.image.onload = () => element.data(directiveName, (instance = new CropImage( element, data )));\n\n\t\t\t});\n\n\n\t\t\tscope.cropImageZoom = value => {\n\n\t\t\t\tif( !instance ) return;\n\n\t\t\t\tinstance.setZoom(value);\n\n\t\t\t};\n\n\t\t\tscope.cropImageZoomIn = rate => {\n\n\t\t\t\tif( !instance ) return;\n\n\t\t\t\tinstance.zoomIn(rate);\n\n\t\t\t};\n\n\n\t\t\tscope.cropImageZoomOut = rate => {\n\n\t\t\t\tif( !instance ) return;\n\n\t\t\t\tinstance.zoomOut(rate);\n\n\t\t\t};\n\n\n\t\t\tscope.cropImageCut = () => {\n\n\t\t\t\tif( !instance ) return;\n\n\t\t\t\tscope.cropImageModeEdit = false;\n\n\t\t\t\tinstance.disabled = true;\n\n\t\t\t\treturn instance.crop();\n\n\t\t\t};\n\n\n\t\t\tscope.cropImageCancel = () => {\n\n\t\t\t\tif( !instance ) return;\n\n\t\t\t\tscope.cropImageModeEdit = false;\n\n\t\t\t\tinstance.cancel();\n\n\t\t\t\tinstance.disabled = true;\n\n\t\t\t};\n\n\n\t\t}\n\n\t};\n\n}\n\n\nmodule.exports.$inject = [\n\t'CropImage'\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/cropImage.js\n **/"],"sourceRoot":""}